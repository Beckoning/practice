#  Dubbo

## 一、Dubbo
### 基础


#### 1、http和RPC的区别:
```
1、传输效率
    RPC：使用自定义的TCP协议，可以让请求报文体积更小，或者使用HTTP2协议，也可以很好的减少报文的体积，提高传输效率
    HTTP：如果使用基于HTTP1.1的协议，请求中会包含很多无用的内容，如果是基于HTTP2.0，那么简单的封装以下是可以作为一个RPC来使用的，这时封装
          标准的RPC框架更多的是服务治理
2、性能消耗
    RPC：可以基于thrift实现高效的二进制传输
    HTTP：大部分是通过json来实现的，字节大小和序列化耗时都比thrift要更消耗性能
3、负载均衡
    RPC：基本上都自带了负载均衡策略
    HTTP：需要配置Nginx、HAProxy来实现
4、服务治理
    RPC：能做到自动通知，不影响上游
    HTTP：需要事先通知，修改Nginx/HAProxy配置
总结：
    RPC主要用于公司内部的服务调用，性能消耗低，传输效率高，服务治理方便。HTTP主要用于对外的异构环境，浏览器接口调用，APP借口调用，第三方接口调用等。
``` 


    





dubbbo
  dubbo调用流程 提供者、消费者、注册中心、监控中心
  zk长链接(心跳检测)
  dubbo关闭,会调用去掉注册操作
  dubbo集群容错:
    Failover 故障转移 当消费者调用提供者集群中的某个服务器失败时，其会自动尝试着调用其它服务器
    Failfast 快速失败
    Failsafe 失败安全策略 当消费者调用提供者出现异常时，直接忽略本次消费操作
    Failback  失败自动恢复策略。消费者调用提供者失败后，Dubbo会记录下该失败请求，然后定时自动重新发送该请求
    Forking  并行策略。消费者对于同一服务并行调用多个提供者服务器，只要一个成功即调用结束并返回结果。
    Broadcast 广播策略。广播调用所有提供者，逐个调用，任意一台报错则报错。


















